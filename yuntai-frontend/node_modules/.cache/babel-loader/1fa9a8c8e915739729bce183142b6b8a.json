{"remainingRequest":"/Users/chenchi03/IdeaProjects/yuntai-frontend/node_modules/babel-loader/lib/index.js!/Users/chenchi03/IdeaProjects/yuntai-frontend/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/chenchi03/IdeaProjects/yuntai-frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/chenchi03/IdeaProjects/yuntai-frontend/src/views/schedule/scheduleList.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/chenchi03/IdeaProjects/yuntai-frontend/src/views/schedule/scheduleList.vue","mtime":1672390192000},{"path":"/Users/chenchi03/IdeaProjects/yuntai-frontend/babel.config.js","mtime":1672390160000},{"path":"/Users/chenchi03/IdeaProjects/yuntai-frontend/node_modules/cache-loader/dist/cjs.js","mtime":1749371729293},{"path":"/Users/chenchi03/IdeaProjects/yuntai-frontend/node_modules/babel-loader/lib/index.js","mtime":1749371729596},{"path":"/Users/chenchi03/IdeaProjects/yuntai-frontend/node_modules/cache-loader/dist/cjs.js","mtime":1749371729293},{"path":"/Users/chenchi03/IdeaProjects/yuntai-frontend/node_modules/vue-loader/lib/index.js","mtime":1749371729670}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBhcGkgZnJvbSAnQC9hcGkvc2NoZWR1bGUvc2NoZWR1bGUnOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGFsbEpvYnM6IFtdLAogICAgICBkaWFsb2dWaXNpYmxlOiBmYWxzZSwKICAgICAgam9iTmFtZTogJycsCiAgICAgIGpvYkdyb3VwOiAnJywKICAgICAgam9iVHlwZTogJ+eugOWNleS7u+WKoSjmtYvor5UpJywKICAgICAgcmVwZWF0VGltZTogJ+avjzEw56eS6ZKf5omn6KGM5LiA5qyhJywKICAgICAgY3JvbkpvYjogJ+WRqOacn+aJp+ihjOS7u+WKoScsCiAgICAgIGNyb25FeHByZXNzaW9uOiAnJywKICAgICAgZGF0YWJhc2VOYW1lOiAnZ21hbGwnLAogICAgICB0YWJsZU5hbWU6ICd5dW50YWlfenVveXVhbicsCiAgICAgIGZpZWxkTmFtZTogJ2FnZScsCiAgICAgIE15U1FMSm9iVHlwZTogJ+epuuWAvOeOhycKICAgIH07CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdGhpcy5mZXRjaERhdGEoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIC8vIOWKoOi9vWJhbm5lcuWIl+ihqOaVsOaNrgogICAgZmV0Y2hEYXRhOiBmdW5jdGlvbiBmZXRjaERhdGEoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIGFwaS5nZXRBbGxKb2JzKCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBfdGhpcy5hbGxKb2JzID0gcmVzcG9uc2UuZGF0YTsKICAgICAgfSk7CiAgICB9LAogICAgYWRkSm9iOiBmdW5jdGlvbiBhZGRKb2IoKSB7CiAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IHRydWU7CiAgICB9LAogICAgZGVsZXRlSm9iOiBmdW5jdGlvbiBkZWxldGVKb2IoaWQsIGpvYk5hbWUsIGpvYkdyb3VwKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwogICAgICBhcGkuZGVsZXRlSm9iKGlkLCBqb2JOYW1lLCBqb2JHcm91cCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBfdGhpczIuZmV0Y2hEYXRhKCk7CiAgICAgIH0pOwogICAgfSwKICAgIHJlc3VtZUpvYjogZnVuY3Rpb24gcmVzdW1lSm9iKGpvYk5hbWUsIGpvYkdyb3VwKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwogICAgICBhcGkucmVzdW1lSm9iKGpvYk5hbWUsIGpvYkdyb3VwKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIF90aGlzMy5mZXRjaERhdGEoKTsKICAgICAgfSk7CiAgICB9LAogICAgcGF1c2VKb2I6IGZ1bmN0aW9uIHBhdXNlSm9iKGpvYk5hbWUsIGpvYkdyb3VwKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwogICAgICBhcGkucGF1c2VKb2Ioam9iTmFtZSwgam9iR3JvdXApLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgX3RoaXM0LmZldGNoRGF0YSgpOwogICAgICB9KTsKICAgIH0sCiAgICBjcmVhdGVKb2I6IGZ1bmN0aW9uIGNyZWF0ZUpvYigpIHsKICAgICAgdmFyIF90aGlzNSA9IHRoaXM7CiAgICAgIHZhciBkYXRhID0gewogICAgICAgIGpvYk5hbWU6IHRoaXMuam9iTmFtZSwKICAgICAgICBqb2JUeXBlOiB0aGlzLmpvYlR5cGUsCiAgICAgICAgam9iR3JvdXA6IHRoaXMuam9iR3JvdXAsCiAgICAgICAgY3JvbkpvYjogdGhpcy5jcm9uSm9iID09PSAn5ZGo5pyf5omn6KGM5Lu75YqhJyA/IGZhbHNlIDogdHJ1ZSwKICAgICAgICBjcm9uRXhwcmVzc2lvbjogdGhpcy5jcm9uRXhwcmVzc2lvbiwKICAgICAgICByZXBlYXRUaW1lOiB0aGlzLnJlcGVhdFRpbWUgPT09ICfmr48xMOenkumSn+aJp+ihjOS4gOasoScgPyAxMCA6IDYwCiAgICAgIH07CiAgICAgIGFwaS5jcmVhdGVKb2IoZGF0YSwgdGhpcy5kYXRhYmFzZU5hbWUsIHRoaXMudGFibGVOYW1lLCB0aGlzLmZpZWxkTmFtZSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBfdGhpczUuZmV0Y2hEYXRhKCk7CiAgICAgICAgX3RoaXM1LmRpYWxvZ1Zpc2libGUgPSBmYWxzZTsKICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"names":["api","data","allJobs","dialogVisible","jobName","jobGroup","jobType","repeatTime","cronJob","cronExpression","databaseName","tableName","fieldName","MySQLJobType","created","fetchData","methods","_this","getAllJobs","then","response","addJob","deleteJob","id","_this2","resumeJob","_this3","pauseJob","_this4","createJob","_this5"],"sources":["src/views/schedule/scheduleList.vue"],"sourcesContent":["<template>\n  <div class=\"app-container\">\n    <el-card class=\"operate-container\" shadow=\"never\">\n      <i class=\"el-icon-tickets\" style=\"margin-top: 5px\" />\n      <span style=\"margin-top: 5px\">任务列表</span>\n      <el-button class=\"btn-add\" size=\"mini\" @click=\"addJob\">添加任务</el-button>\n    </el-card>\n\n    <table class=\"tableCss\">\n      <tr style=\"text-align: center;\">\n        <th>任务ID</th>\n        <th>任务类型</th>\n        <th>任务名</th>\n        <th>任务组</th>\n        <th>是否是cron任务</th>\n        <th>cron表达式</th>\n        <th>执行周期</th>\n        <th>任务状态</th>\n        <th>操作</th>\n      </tr>\n      <tr v-for=\"item in allJobs\" style=\"text-align: center;\">\n        <td>{{ item.id }}</td>\n        <td>{{ item.jobType }}</td>\n        <td>{{ item.jobName }}</td>\n        <td>{{ item.jobGroup }}</td>\n        <td>{{ item.cronJob }}</td>\n        <td>{{ item.cronExpression }}</td>\n        <td>{{ item.repeatTime }} 秒</td>\n        <td>{{ item.jobStatus }}</td>\n        <td>\n          <button @click=\"deleteJob(item.id, item.jobName, item.jobGroup)\">删除任务</button>\n          <button v-if=\"item.jobStatus === '已暂停'\" @click=\"resumeJob(item.jobName, item.jobGroup)\">重启任务</button>\n          <button v-if=\"item.jobStatus === '运行中'\" @click=\"pauseJob(item.jobName, item.jobGroup)\">暂停任务</button>\n        </td>\n      </tr>\n    </table>\n\n    <el-dialog title=\"创建新任务\" :visible.sync=\"dialogVisible\">\n      <el-form label-width=\"80px\">\n        <el-form-item label=\"作业列表\">\n          <el-select v-model=\"jobType\">\n            <el-option :key=\"'SimpleJob'\" :value=\"'简单任务(测试)'\"></el-option>\n            <el-option :key=\"'MySQLJob'\" :value=\"'MySQL数据监控任务'\"></el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"数据库名\" v-if=\"jobType === 'MySQL数据监控任务'\">\n          <el-select v-model=\"databaseName\">\n            <el-option :key=\"'gmall'\" :value=\"'gmall'\"></el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"表名\" v-if=\"jobType === 'MySQL数据监控任务'\">\n          <el-select v-model=\"tableName\">\n            <el-option :key=\"'table'\" :value=\"'yuntai_zuoyuan'\"></el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"字段名\" v-if=\"jobType === 'MySQL数据监控任务'\">\n          <el-select v-model=\"fieldName\">\n            <el-option :key=\"'age'\" :value=\"'age'\"></el-option>\n            <el-option :key=\"'height'\" :value=\"'height'\"></el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"任务\" v-if=\"jobType === 'MySQL数据监控任务'\">\n          <el-select v-model=\"MySQLJobType\">\n            <el-option :key=\"'nullRate'\" :value=\"'空值率'\"></el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"任务类型\">\n          <el-select v-model=\"cronJob\">\n            <el-option :key=\"'SimpleTypeJob'\" :value=\"'周期执行任务'\"></el-option>\n            <el-option :key=\"'CronTypeJob'\" :value=\"'Cron任务'\"></el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"执行周期\" v-if=\"cronJob === '周期执行任务'\">\n          <el-select v-model=\"repeatTime\">\n            <el-option :key=\"'TenSeconds'\" :value=\"'每10秒钟执行一次'\"></el-option>\n            <el-option :key=\"'OneMinute'\" :value=\"'每分钟执行一次'\"></el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"Cron表达式\" v-if=\"cronJob === 'Cron任务'\">\n          <el-input v-model=\"cronExpression\" />\n        </el-form-item>\n        <el-form-item label=\"作业名\">\n          <el-input v-model=\"jobName\" />\n        </el-form-item>\n        <el-form-item label=\"组名\">\n          <el-input v-model=\"jobGroup\" />\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\">\n        <el-button type=\"primary\" size=\"small\" @click=\"createJob\">创建新任务</el-button>\n        <el-button size=\"small\" @click=\"dialogVisible = false\">取消</el-button>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport api from '@/api/schedule/schedule';\n\nexport default {\n  data() {\n    return {\n      allJobs: [],\n      dialogVisible: false,\n      jobName: '',\n      jobGroup: '',\n      jobType: '简单任务(测试)',\n      repeatTime: '每10秒钟执行一次',\n      cronJob: '周期执行任务',\n      cronExpression: '',\n      databaseName: 'gmall',\n      tableName: 'yuntai_zuoyuan',\n      fieldName: 'age',\n      MySQLJobType: '空值率',\n    }\n  },\n  created() {\n    this.fetchData();\n  },\n  methods: {\n    // 加载banner列表数据\n    fetchData() {\n      api.getAllJobs().then(response => {\n        this.allJobs = response.data;\n      })\n    },\n    addJob() {\n      this.dialogVisible = true;\n    },\n    deleteJob(id, jobName, jobGroup) {\n      api.deleteJob(id, jobName, jobGroup).then(response => {\n        this.fetchData();\n      })\n    },\n    resumeJob(jobName, jobGroup) {\n      api.resumeJob(jobName, jobGroup).then(response => {\n        this.fetchData();\n      })\n    },\n    pauseJob(jobName, jobGroup) {\n      api.pauseJob(jobName, jobGroup).then(response => {\n        this.fetchData();\n      })\n    },\n    createJob() {\n      const data = {\n        jobName: this.jobName,\n        jobType: this.jobType,\n        jobGroup: this.jobGroup,\n        cronJob: this.cronJob === '周期执行任务' ? false : true,\n        cronExpression: this.cronExpression,\n        repeatTime: this.repeatTime === '每10秒钟执行一次' ? 10 : 60,\n      };\n\n      api.createJob(data, this.databaseName, this.tableName, this.fieldName).then(response => {\n        this.fetchData();\n        this.dialogVisible = false;\n      });\n    }\n  }\n}\n</script>\n\n<style scoped>\n.tableCss {\n  width: 100%;\n  margin-top: 10px;\n  border: 1px solid #ebeef5;\n}\n\ntable>tr>th {\n  padding: 10px;\n}\n\ntable>tr>td {\n  padding: 10px;\n}\n\nbutton {\n  margin: 10px;\n}\n</style>"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiGA,OAAAA,GAAA;AAEA;EACAC,IAAA,WAAAA,KAAA;IACA;MACAC,OAAA;MACAC,aAAA;MACAC,OAAA;MACAC,QAAA;MACAC,OAAA;MACAC,UAAA;MACAC,OAAA;MACAC,cAAA;MACAC,YAAA;MACAC,SAAA;MACAC,SAAA;MACAC,YAAA;IACA;EACA;EACAC,OAAA,WAAAA,QAAA;IACA,KAAAC,SAAA;EACA;EACAC,OAAA;IACA;IACAD,SAAA,WAAAA,UAAA;MAAA,IAAAE,KAAA;MACAjB,GAAA,CAAAkB,UAAA,GAAAC,IAAA,WAAAC,QAAA;QACAH,KAAA,CAAAf,OAAA,GAAAkB,QAAA,CAAAnB,IAAA;MACA;IACA;IACAoB,MAAA,WAAAA,OAAA;MACA,KAAAlB,aAAA;IACA;IACAmB,SAAA,WAAAA,UAAAC,EAAA,EAAAnB,OAAA,EAAAC,QAAA;MAAA,IAAAmB,MAAA;MACAxB,GAAA,CAAAsB,SAAA,CAAAC,EAAA,EAAAnB,OAAA,EAAAC,QAAA,EAAAc,IAAA,WAAAC,QAAA;QACAI,MAAA,CAAAT,SAAA;MACA;IACA;IACAU,SAAA,WAAAA,UAAArB,OAAA,EAAAC,QAAA;MAAA,IAAAqB,MAAA;MACA1B,GAAA,CAAAyB,SAAA,CAAArB,OAAA,EAAAC,QAAA,EAAAc,IAAA,WAAAC,QAAA;QACAM,MAAA,CAAAX,SAAA;MACA;IACA;IACAY,QAAA,WAAAA,SAAAvB,OAAA,EAAAC,QAAA;MAAA,IAAAuB,MAAA;MACA5B,GAAA,CAAA2B,QAAA,CAAAvB,OAAA,EAAAC,QAAA,EAAAc,IAAA,WAAAC,QAAA;QACAQ,MAAA,CAAAb,SAAA;MACA;IACA;IACAc,SAAA,WAAAA,UAAA;MAAA,IAAAC,MAAA;MACA,IAAA7B,IAAA;QACAG,OAAA,OAAAA,OAAA;QACAE,OAAA,OAAAA,OAAA;QACAD,QAAA,OAAAA,QAAA;QACAG,OAAA,OAAAA,OAAA;QACAC,cAAA,OAAAA,cAAA;QACAF,UAAA,OAAAA,UAAA;MACA;MAEAP,GAAA,CAAA6B,SAAA,CAAA5B,IAAA,OAAAS,YAAA,OAAAC,SAAA,OAAAC,SAAA,EAAAO,IAAA,WAAAC,QAAA;QACAU,MAAA,CAAAf,SAAA;QACAe,MAAA,CAAA3B,aAAA;MACA;IACA;EACA;AACA","ignoreList":[]}]}