{"remainingRequest":"/Users/chenchi03/IdeaProjects/yuntai-frontend/node_modules/babel-loader/lib/index.js!/Users/chenchi03/IdeaProjects/yuntai-frontend/src/permission.js","dependencies":[{"path":"/Users/chenchi03/IdeaProjects/yuntai-frontend/src/permission.js","mtime":1672390168000},{"path":"/Users/chenchi03/IdeaProjects/yuntai-frontend/babel.config.js","mtime":1672390160000},{"path":"/Users/chenchi03/IdeaProjects/yuntai-frontend/node_modules/cache-loader/dist/cjs.js","mtime":1749371729293},{"path":"/Users/chenchi03/IdeaProjects/yuntai-frontend/node_modules/babel-loader/lib/index.js","mtime":1749371729596}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9yZWdlbmVyYXRvciBmcm9tICIvVXNlcnMvY2hlbmNoaTAzL0lkZWFQcm9qZWN0cy95dW50YWktZnJvbnRlbmQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3JlZ2VuZXJhdG9yLmpzIjsKaW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL1VzZXJzL2NoZW5jaGkwMy9JZGVhUHJvamVjdHMveXVudGFpLWZyb250ZW5kL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyLmpzIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy9jaGVuY2hpMDMvSWRlYVByb2plY3RzL3l1bnRhaS1mcm9udGVuZC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwppbXBvcnQgcm91dGVyIGZyb20gJy4vcm91dGVyJzsKaW1wb3J0IHN0b3JlIGZyb20gJy4vc3RvcmUnOwppbXBvcnQgeyBNZXNzYWdlIH0gZnJvbSAnZWxlbWVudC11aSc7CmltcG9ydCBOUHJvZ3Jlc3MgZnJvbSAnbnByb2dyZXNzJzsgLy8g5rC05bmz6L+b5bqm5p2h5o+Q56S6OiDlnKjot7Povazot6/nlLHml7bkvb/nlKgKaW1wb3J0ICducHJvZ3Jlc3MvbnByb2dyZXNzLmNzcyc7IC8vIOawtOW5s+i/m+W6puadoeagt+W8jwppbXBvcnQgZ2V0UGFnZVRpdGxlIGZyb20gJ0AvdXRpbHMvZ2V0LXBhZ2UtdGl0bGUnOyAvLyDojrflj5blupTnlKjlpLTpg6jmoIfpopjnmoTlh73mlbAKCk5Qcm9ncmVzcy5jb25maWd1cmUoewogIHNob3dTcGlubmVyOiBmYWxzZQp9KTsgLy8g6YWN572uTlByb2dyZXNzOiDkuI3mmL7npLrlj7Pkvqfml4vovazov5vluqbmnaEKCi8vIOS4jeeUqOi/m+ihjHRva2Vu5qOA5p+l55qE55m95ZCN5Y2V6Lev5b6E5pWw57uECnZhciB3aGl0ZUxpc3QgPSBbJy9sb2dpbiddOwoKLy8g5rOo5YaM5YWo5bGA5YmN572u5a6I5Y2rOiDlnKjot6/nlLHlh4blpIfot7PovazliY3miafooYwKcm91dGVyLmJlZm9yZUVhY2goLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICB2YXIgX3JlZiA9IF9hc3luY1RvR2VuZXJhdG9yKC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3IoKS5tKGZ1bmN0aW9uIF9jYWxsZWUodG8sIGZyb20sIG5leHQpIHsKICAgIHZhciB0b2tlbiwgaGFzTG9naW4sIF90OwogICAgcmV0dXJuIF9yZWdlbmVyYXRvcigpLncoZnVuY3Rpb24gKF9jb250ZXh0KSB7CiAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0Lm4pIHsKICAgICAgICBjYXNlIDA6CiAgICAgICAgICAvLyBkZWJ1Z2dlcgogICAgICAgICAgLy8g5Zyo5pi+56S66L+b5bqm5p2hCiAgICAgICAgICBOUHJvZ3Jlc3Muc3RhcnQoKTsKCiAgICAgICAgICAvLyDorr7nva7mlbTkuKrpobXpnaLnmoTmoIfpopgKICAgICAgICAgIGRvY3VtZW50LnRpdGxlID0gZ2V0UGFnZVRpdGxlKHRvLm1ldGEudGl0bGUpOwoKICAgICAgICAgIC8vIOiOt+WPlmNvb2tpZeS4reS/neWtmOeahHRva2VuCiAgICAgICAgICB0b2tlbiA9IHN0b3JlLmdldHRlcnMudG9rZW47IC8vIOWmguaenHRva2Vu5a2Y5ZyoKOW3sue7j+eZu+mZhuaIluWJjemdoueZu+mZhui/hykKICAgICAgICAgIGlmICghdG9rZW4pIHsKICAgICAgICAgICAgX2NvbnRleHQubiA9IDc7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgICAgaWYgKCEodG8ucGF0aCA9PT0gJy9sb2dpbicpKSB7CiAgICAgICAgICAgIF9jb250ZXh0Lm4gPSAxOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICAgIC8vIOebtOaOpei3s+i9rOWIsOaguei3r+eUsSwg5bm25a6M5oiQ6L+b5bqm5p2hCiAgICAgICAgICBuZXh0KHsKICAgICAgICAgICAgcGF0aDogJy8nCiAgICAgICAgICB9KTsKICAgICAgICAgIE5Qcm9ncmVzcy5kb25lKCk7CiAgICAgICAgICBfY29udGV4dC5uID0gNjsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgMToKICAgICAgICAgIC8vIOivt+axgueahOS4jeaYr+eZu+mZhui3r+eUsQogICAgICAgICAgLy8g5piv5ZCm5bey57uP55m76ZmGCiAgICAgICAgICBoYXNMb2dpbiA9ICEhc3RvcmUuZ2V0dGVycy5uYW1lOwogICAgICAgICAgaWYgKCFoYXNMb2dpbikgewogICAgICAgICAgICBfY29udGV4dC5uID0gMjsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CiAgICAgICAgICAvLyDnm7TmjqXmlL7ooYwKICAgICAgICAgIG5leHQoKTsKICAgICAgICAgIF9jb250ZXh0Lm4gPSA2OwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAyOgogICAgICAgICAgX2NvbnRleHQucCA9IDI7CiAgICAgICAgICBfY29udGV4dC5uID0gMzsKICAgICAgICAgIHJldHVybiBzdG9yZS5kaXNwYXRjaCgndXNlci9nZXRJbmZvJyk7CiAgICAgICAgY2FzZSAzOgogICAgICAgICAgLy8g5LiN6IO955SobmV4dCgpLCDlkKbliJnliLfmlrDkuI3kvJrlh7rmnaXlvILmraXot6/nlLHnlYzpnaIKICAgICAgICAgIG5leHQoX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCB0byksIHt9LCB7CiAgICAgICAgICAgIHJlcGxhY2U6IHRydWUKICAgICAgICAgIH0pKTsgLy8gaHR0cHM6Ly9naXRodWIuY29tL1BhbkppYUNoZW4vdnVlLWFkbWluLXRlbXBsYXRlL2lzc3Vlcy85CiAgICAgICAgICBfY29udGV4dC5uID0gNjsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgNDoKICAgICAgICAgIF9jb250ZXh0LnAgPSA0OwogICAgICAgICAgX3QgPSBfY29udGV4dC52OwogICAgICAgICAgX2NvbnRleHQubiA9IDU7CiAgICAgICAgICByZXR1cm4gc3RvcmUuZGlzcGF0Y2goJ3VzZXIvcmVzZXRVc2VyJyk7CiAgICAgICAgY2FzZSA1OgogICAgICAgICAgLy8g5o+Q56S66ZSZ6K+v5L+h5oGvCiAgICAgICAgICBNZXNzYWdlLmVycm9yKF90IHx8ICdIYXMgRXJyb3InKTsKICAgICAgICAgIC8vIOi3s+i9rOWIsOeZu+mZhumhtemdoiwg5bm25pC65bim5Y6f5pys6KaB6Lez6L2s55qE6Lev55Sx6Lev5b6ELCDnlKjkuo7nmbvpmYbmiJDlip/lkI7ot7PovawKICAgICAgICAgIG5leHQoIi9sb2dpbj9yZWRpcmVjdD0iLmNvbmNhdCh0by5wYXRoKSk7CiAgICAgICAgICAvLyDlrozmiJDov5vluqbmnaEKICAgICAgICAgIE5Qcm9ncmVzcy5kb25lKCk7CiAgICAgICAgY2FzZSA2OgogICAgICAgICAgX2NvbnRleHQubiA9IDg7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlIDc6CiAgICAgICAgICAvLyDlpoLmnpznm67moIfot6/lvoTlnKjnmb3lkI3ljZXkuK0o5piv5LiN6ZyA6KaBdG9rZW7nmoTot6/lvoQpCiAgICAgICAgICBpZiAod2hpdGVMaXN0LmluZGV4T2YodG8ucGF0aCkgIT09IC0xKSB7CiAgICAgICAgICAgIC8vIOaUvuihjAogICAgICAgICAgICBuZXh0KCk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvLyDlpoLmnpzmsqHlnKjnmb3lkI3ljZXkuK0sIOi3s+i9rOWIsOeZu+mZhui3r+eUseaQuuW4puWOn+ebruagh+i3r+W+hAogICAgICAgICAgICBuZXh0KCIvbG9naW4/cmVkaXJlY3Q9Ii5jb25jYXQodG8ucGF0aCkpOwogICAgICAgICAgICAvLyDlrozmiJDov5vluqbmnaEKICAgICAgICAgICAgTlByb2dyZXNzLmRvbmUoKTsKICAgICAgICAgIH0KICAgICAgICBjYXNlIDg6CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYSgyKTsKICAgICAgfQogICAgfSwgX2NhbGxlZSwgbnVsbCwgW1syLCA0XV0pOwogIH0pKTsKICByZXR1cm4gZnVuY3Rpb24gKF94LCBfeDIsIF94MykgewogICAgcmV0dXJuIF9yZWYuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICB9Owp9KCkpOwoKLy8g5rOo5YaM5YWo5bGA5ZCO572u5a6I5Y2rOiDlnKjot6/nlLHot7PovazlrozmiJDlkI7miafooYwKcm91dGVyLmFmdGVyRWFjaChmdW5jdGlvbiAoKSB7CiAgLy8gY29uc29sZS5sb2coJ2FmdGVyRW50ZXIgY2FsbGJhY2soKScpCiAgLy8g5a6M5oiQKOmakOiXjynov5vluqbmnaHmmL7npLoKICBOUHJvZ3Jlc3MuZG9uZSgpOwp9KTs="},{"version":3,"names":["router","store","Message","NProgress","getPageTitle","configure","showSpinner","whiteList","beforeEach","_ref","_asyncToGenerator","_regenerator","m","_callee","to","from","next","token","hasLogin","_t","w","_context","n","start","document","title","meta","getters","path","done","name","p","dispatch","_objectSpread","replace","v","error","concat","indexOf","a","_x","_x2","_x3","apply","arguments","afterEach"],"sources":["/Users/chenchi03/IdeaProjects/yuntai-frontend/src/permission.js"],"sourcesContent":["import router from './router'\nimport store from './store'\nimport { Message } from 'element-ui'\nimport NProgress from 'nprogress' // 水平进度条提示: 在跳转路由时使用\nimport 'nprogress/nprogress.css' // 水平进度条样式\nimport getPageTitle from '@/utils/get-page-title' // 获取应用头部标题的函数\n\nNProgress.configure({ showSpinner: false }) // 配置NProgress: 不显示右侧旋转进度条\n\n// 不用进行token检查的白名单路径数组\nconst whiteList = ['/login']\n\n// 注册全局前置守卫: 在路由准备跳转前执行\nrouter.beforeEach(async(to, from, next) => {\n  // debugger\n  // 在显示进度条\n  NProgress.start()\n\n  // 设置整个页面的标题\n  document.title = getPageTitle(to.meta.title)\n\n  // 获取cookie中保存的token\n  const token = store.getters.token\n\n  // 如果token存在(已经登陆或前面登陆过)\n  if (token) {\n    // 如果请求的是登陆路由\n    if (to.path === '/login') {\n      // 直接跳转到根路由, 并完成进度条\n      next({ path: '/' })\n      NProgress.done()\n    } else { // 请求的不是登陆路由\n      // 是否已经登陆\n      const hasLogin = !!store.getters.name\n      if (hasLogin) {\n        // 直接放行\n        next()\n      } else {\n        try {\n          // 异步请求获取用户信息(包含权限数据)\n          await store.dispatch('user/getInfo')\n          // 不能用next(), 否则刷新不会出来异步路由界面\n          next({ ...to, replace: true }) // https://github.com/PanJiaChen/vue-admin-template/issues/9\n        } catch (error) {\n          // 重置用户信息\n          await store.dispatch('user/resetUser')\n          // 提示错误信息\n          Message.error(error || 'Has Error')\n          // 跳转到登陆页面, 并携带原本要跳转的路由路径, 用于登陆成功后跳转\n          next(`/login?redirect=${to.path}`)\n          // 完成进度条\n          NProgress.done()\n        }\n      }\n    }\n  } else {\n    // 如果目标路径在白名单中(是不需要token的路径)\n    if (whiteList.indexOf(to.path) !== -1) {\n      // 放行\n      next()\n    } else {\n      // 如果没在白名单中, 跳转到登陆路由携带原目标路径\n      next(`/login?redirect=${to.path}`)\n      // 完成进度条\n      NProgress.done()\n    }\n  }\n})\n\n// 注册全局后置守卫: 在路由跳转完成后执行\nrouter.afterEach(() => {\n  // console.log('afterEnter callback()')\n  // 完成(隐藏)进度条显示\n  NProgress.done()\n})\n"],"mappings":"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","ignoreList":[]}]}